(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{565:function(e,t,r){var content=r(649);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("bbb4568e",content,!0,{sourceMap:!1})},648:function(e,t,r){"use strict";r(565)},649:function(e,t,r){var n=r(19)((function(i){return i[1]}));n.push([e.i,'.table-container[data-v-404f9f79]{overflow-x:auto;-webkit-overflow-scrolling:touch}.bordered-table[data-v-404f9f79]{border:1px solid #e0e0e0;border-radius:4px}.pointer[data-v-404f9f79]{cursor:pointer}.custom-table .v-data-table__header th[data-v-404f9f79],.custom-table .v-data-table__wrapper td[data-v-404f9f79]{font-size:.8125rem;font-weight:500;line-height:1rem}.custom-text[data-v-404f9f79]{color:#333;font-family:"Roboto",sans-serif}',""]),n.locals={},e.exports=n},681:function(e,t,r){"use strict";r.r(t);var n=r(688),o=r(254),c=r(490),l=r(488),d=r(675),f=r(179),m=r(673),h=r(489),v=r(573),x=r(672),k=r(671),w=r(500),y=(r(8),r(5),r(2)),P=r(23),D=(r(84),r(33),r(9),r(76),r(38),r(16),r(17),r(10),r(11),r(561)),S=r.n(D),O=r(94),_=r.n(O);function j(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function C(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?j(Object(r),!0).forEach((function(t){Object(y.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):j(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N={middleware:"auth",layout:"sidebar",data:function(){return{loading:!1,loadingText:"Loading... Please wait",headers:[{text:"Activation Id",value:"activationId"},{text:"Registration Id",value:"registrationId"},{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Designation",value:"designation"},{text:"State",value:"stateId"},{text:"District",value:"districtId"},{text:"Address",value:"address"},{text:"Photo",value:"photo"},{text:"ID Proof",value:"idProof"}],users:[],total:0,page:1,itemsPerPage:10,filter:"",selectedStateName:"",selectedDistrictName:"",selectedDesignation:"",states:[],districts:[],designations:[],snackbar:!1,snackbarMessage:""}},methods:{fetchUsers:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=1,e.loading=!0,r=_.a.get("token")||"",t.next=6,e.$axios.get("/api/Users/active",{params:{page:e.page,limit:e.itemsPerPage,filter:e.filter,stateId:e.selectedStateName,districtId:e.selectedDistrictName,designation:e.selectedDesignation},headers:{Authorization:"Bearer ".concat(r)}});case 6:n=t.sent,o="https://rarfoundationbharat.com/",e.users=n.data.users.map((function(e){return C(C({},e),{},{photo:"".concat(o,"/uploads/").concat(e.photo),idProof:"".concat(o,"/uploads/").concat(e.idProof)})})),e.total=n.data.total,e.loading=!1,t.next=17;break;case 13:t.prev=13,t.t0=t.catch(1),console.error("Failed to fetch users:",t.t0),e.loading=!1;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})))()},downloadFile:function(e){var link=document.createElement("a");link.href=e,link.download=e.split("/").pop(),link.click()},fetchStates:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/api/state");case 3:r=t.sent,e.states=r.data.result.result.map((function(e){return{name:e.name,id:e.id}})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching states:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchDistricts:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/api/district?state=".concat(e.selectedStateName));case 3:r=t.sent,e.districts=r.data.result.result.map((function(e){return{name:e.name,id:e.id}})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching districts:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},fetchDesignations:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.get("/api/designation");case 3:r=t.sent,e.designations=r.data.result.result.map((function(e){return{name:e.name,value:e.value}})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching designations:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},exportToCSV:function(){var e=this;return Object(P.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,link;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=_.a.get("token")||"",t.next=4,e.$axios.get("/api/Users/active-export",{params:{filter:e.filter,stateId:e.selectedStateName,districtId:e.selectedDistrictName,designation:e.selectedDesignation},headers:{Authorization:"Bearer ".concat(r)}});case 4:n=t.sent,o=n.data.result,e.snackbarMessage=n.data.message,e.snackbar=!0,c="".concat("https://rarfoundationbharat.com/","/").concat(o),(link=document.createElement("a")).href=c,link.download=o.split("/").pop(),link.click(),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(0),console.error("Error exporting data:",t.t0);case 19:case"end":return t.stop()}}),t,null,[[0,16]])})))()}},created:function(){this.debouncedFetchUsers=S()(this.fetchUsers,300),this.fetchUsers(),this.fetchStates(),this.fetchDesignations()},watch:{page:function(){this.fetchUsers()},itemsPerPage:function(){this.fetchUsers()},filter:function(){this.page=1,this.debouncedFetchUsers()},selectedStateName:function(){this.selectedDistrictName="",this.fetchDistricts()}}},U=(r(648),r(45)),component=Object(U.a)(N,(function(){var e=this,t=e._self._c;return t(l.a,[t(h.a,[t(c.a,{attrs:{cols:"12"}},[t("h1",{staticClass:"title"},[e._v("Active Users")])])],1),e._v(" "),t(h.a,[t(c.a,{attrs:{cols:"12",sm:"6",md:"3"}},[t(w.a,{staticClass:"my-1",staticStyle:{"font-size":"0.75rem",height:"40px"},attrs:{label:"Search",clearable:"",dense:""},on:{input:e.debouncedFetchUsers},model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"6",md:"3"}},[t(v.a,{staticClass:"my-1",staticStyle:{"font-size":"0.75rem",height:"40px"},attrs:{items:e.states,"item-text":"name","item-value":"name",label:"Select State",clearable:"",dense:""},on:{change:e.fetchDistricts},model:{value:e.selectedStateName,callback:function(t){e.selectedStateName=t},expression:"selectedStateName"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"6",md:"3"}},[t(v.a,{staticClass:"my-1",staticStyle:{"font-size":"0.75rem",height:"40px"},attrs:{items:e.districts,"item-text":"name","item-value":"name",label:"Select District",clearable:"",dense:""},on:{change:e.fetchUsers},model:{value:e.selectedDistrictName,callback:function(t){e.selectedDistrictName=t},expression:"selectedDistrictName"}})],1),e._v(" "),t(c.a,{attrs:{cols:"12",sm:"6",md:"3"}},[t(v.a,{staticClass:"my-1",staticStyle:{"font-size":"0.75rem",height:"40px"},attrs:{items:e.designations,"item-text":"name","item-value":"value",label:"Select Designation",clearable:"",dense:""},on:{change:e.fetchUsers},model:{value:e.selectedDesignation,callback:function(t){e.selectedDesignation=t},expression:"selectedDesignation"}})],1)],1),e._v(" "),t(h.a,[t(c.a,{attrs:{cols:"12"}},[t(o.a,{staticClass:"my-1 export-btn",attrs:{color:"#ff4800"},on:{click:e.exportToCSV}},[t("span",{staticClass:"white--text"},[e._v("Export")])])],1)],1),e._v(" "),t("div",{staticClass:"table-container"},[t(d.a,{staticClass:"elevation-1 bordered-table custom-table",attrs:{headers:e.headers,items:e.users,"items-per-page":e.itemsPerPage,page:e.page,"server-items-length":e.total,loading:e.loading,"loading-text":"Loading... Please wait"},on:{"update:page":[function(t){e.page=t},e.fetchUsers],"update:items-per-page":e.fetchUsers},scopedSlots:e._u([{key:"loading",fn:function(){return[t(h.a,[t(c.a,{attrs:{cols:"12"}},[t(x.a,{staticClass:"mx-auto",attrs:{loading:e.loading,height:"200",width:"100%","loading-text":e.loadingText},scopedSlots:e._u([{key:"default",fn:function(){return[t(f.a,{attrs:{src:"/default-placeholder.jpg",contain:""}})]},proxy:!0}])})],1)],1)]},proxy:!0},{key:"item.photo",fn:function(r){var n=r.item;return[t(f.a,{staticClass:"pointer",attrs:{src:n.photo,"max-height":"100","max-width":"100",contain:""},on:{click:function(t){return e.downloadFile(n.photo)}}})]}},{key:"item.idProof",fn:function(r){var n=r.item;return[t(f.a,{staticClass:"pointer",attrs:{src:n.idProof,"max-height":"100","max-width":"100",contain:""},on:{click:function(t){return e.downloadFile(n.idProof)}}})]}},{key:"no-data",fn:function(){return[t(n.a,{attrs:{type:"warning",icon:"mdi-alert"}},[e._v(" No data available ")])]},proxy:!0}])})],1),e._v(" "),t(h.a,{staticClass:"mt-4"},[t(c.a,{attrs:{cols:"12"}},[t(m.a,{staticClass:"mt-2",attrs:{length:Math.ceil(e.total/e.itemsPerPage)},on:{input:e.fetchUsers},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1),e._v(" "),t(k.a,{attrs:{timeout:3e3,top:"",right:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n\t\t"+e._s(e.snackbarMessage)+"\n\t\t"),t(o.a,{attrs:{color:"red",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("Close")])],1)],1)}),[],!1,null,"404f9f79",null);t.default=component.exports}}]);