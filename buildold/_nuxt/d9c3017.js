(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{569:function(e,t,r){var content=r(657);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(20).default)("13af57dd",content,!0,{sourceMap:!1})},656:function(e,t,r){"use strict";r(569)},657:function(e,t,r){var n=r(19)((function(i){return i[1]}));n.push([e.i,".v-data-table .v-icon[data-v-67b19ae9]{cursor:pointer;margin-right:8px}",""]),n.locals={},e.exports=n},685:function(e,t,r){"use strict";r.r(t);var n=r(254),o=r(219),l=r(91),c=r(490),d=r(488),v=r(675),m=r(520),f=r(512),h=r(220),R=r(489),k=r(671),x=r(494),_=r(500),w=r(553),D=(r(9),r(67),r(38),r(8),r(16),r(17),r(10),r(5),r(11),r(2)),O=r(23),C=(r(84),r(28),r(94)),j=r.n(C);function y(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function E(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?y(Object(r),!0).forEach((function(t){Object(D.a)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var N={layout:"sidebar",middleware:"auth",data:function(){return{helpRequests:[],snackbar:!1,snackbarMessage:"",headers:[{text:"Name",value:"name"},{text:"Email",value:"email"},{text:"Contact Number",value:"contactNo"},{text:"Description",value:"description"},{text:"Actions",value:"actions",sortable:!1}],showCreateDialog:!1,isResolutionDialogVisible:!1,isEditing:!1,resolutionDetails:"",validResolution:!1,isResolved:!1,form:{id:null,name:"",email:"",contactNo:"",description:"",status:"Pending",resolutionDetails:""},valid:!1,nameRules:[function(e){return!!e||"Name is required"}],emailRules:[function(e){return!!e||"Email is required"},function(e){return/.+@.+\..+/.test(e)||"E-mail must be valid"}],contactNoRules:[function(e){return!!e||"Contact Number is required"},function(e){return/^[0-9]{10,15}$/.test(e)||"Contact Number must be 10-15 digits"}],resolutionRules:[function(e){return!!e||"Resolution details are required"}]}},mounted:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchHelpRequests();case 2:case"end":return t.stop()}}),t)})))()},methods:{fetchHelpRequests:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.$axios.$get("/api/help");case 3:r=t.sent,e.helpRequests=r.result.result,t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.error("Error fetching help requests:",t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()},resetForm:function(){this.form={id:null,name:"",email:"",contactNo:"",description:"",status:"Pending",resolutionDetails:""},this.valid=!1,this.isEditing=!1,this.showCreateDialog=!1},saveHelpRequest:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){var r,n,o,l;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,r=E({},e.form),n=j.a.get("token")||"",!e.isEditing){t.next=11;break}return t.next=6,e.$axios.$put("/api/help/".concat(e.form.id),r,{headers:{Authorization:"Bearer ".concat(n)}});case 6:o=t.sent,e.snackbarMessage=o.message,e.snackbar=!0,t.next=16;break;case 11:return t.next=13,e.$axios.$post("/api/help/submit-form",r,{headers:{Authorization:"Bearer ".concat(n)}});case 13:l=t.sent,e.snackbarMessage=l.message,e.snackbar=!0;case 16:e.showCreateDialog=!1,e.resetForm(),e.fetchHelpRequests(),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(0),console.error("Error saving help request:",t.t0);case 24:case"end":return t.stop()}}),t,null,[[0,21]])})))()},showResolutionDialog:function(e){this.form=E({},e),this.resolutionDetails=e.resolutionDetails||"",this.isResolved="Resolved"===e.status,this.isResolutionDialogVisible=!0},closeResolutionDialog:function(){this.isResolutionDialogVisible=!1},saveResolution:function(){var e=this;return Object(O.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r={resolutionDetails:e.resolutionDetails,status:"Resolved"},n=j.a.get("token")||"",t.next=5,e.$axios.$put("/api/help/".concat(e.form.id),r,{headers:{Authorization:"Bearer ".concat(n)}});case 5:o=t.sent,e.snackbarMessage=o.message,e.snackbar=!0,e.isResolutionDialogVisible=!1,e.fetchHelpRequests(),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),console.error("Error saving resolution:",t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})))()},editHelpRequest:function(e){var t=this;return Object(O.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:t.isEditing=!0,t.form=E({},e),t.showCreateDialog=!0;case 3:case"end":return r.stop()}}),r)})))()},deleteHelpRequest:function(e){var t=this;return Object(O.a)(regeneratorRuntime.mark((function r(){var n,o;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,n=j.a.get("token")||"",r.next=4,t.$axios.$delete("/api/help/".concat(e,"/delete"),{headers:{Authorization:"Bearer ".concat(n)}});case 4:o=r.sent,t.snackbarMessage=o.message,t.snackbar=!0,t.fetchHelpRequests(),r.next=13;break;case 10:r.prev=10,r.t0=r.catch(0),console.error("Error deleting help request:",r.t0);case 13:case"end":return r.stop()}}),r,null,[[0,10]])})))()}}},H=(r(656),r(45)),component=Object(H.a)(N,(function(){var e=this,t=e._self._c;return t(d.a,[t(R.a,[t(c.a,{attrs:{cols:"12"}},[t("h1",{staticClass:"title"},[e._v("Help Requests")])])],1),e._v(" "),t(R.a,[t(c.a,{attrs:{cols:"12"}},[t(n.a,{attrs:{color:"primary"},on:{click:function(t){e.showCreateDialog=!0}}},[e._v("Add New Help Request")]),e._v(" "),t(v.a,{attrs:{headers:e.headers,items:e.helpRequests,"item-key":"id"},scopedSlots:e._u([{key:"item.actions",fn:function(r){var n=r.item;return[t(h.a,{on:{click:function(t){return e.editHelpRequest(n)}}},[e._v("mdi-pencil")]),e._v(" "),t(h.a,{on:{click:function(t){return e.showResolutionDialog(n)}}},[e._v("mdi-comment-edit")]),e._v(" "),t(h.a,{on:{click:function(t){return e.deleteHelpRequest(n.id)}}},[e._v("mdi-delete")])]}}])})],1)],1),e._v(" "),t(m.a,{attrs:{"max-width":"500px"},model:{value:e.showCreateDialog,callback:function(t){e.showCreateDialog=t},expression:"showCreateDialog"}},[t(o.a,[t(l.d,[t("span",{staticClass:"headline"},[e._v(e._s(e.isEditing?"Edit Help Request":"Create Help Request"))])]),e._v(" "),t(l.b,[t(f.a,{ref:"form",model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[t(_.a,{attrs:{rules:e.nameRules,label:"Name",required:""},model:{value:e.form.name,callback:function(t){e.$set(e.form,"name",t)},expression:"form.name"}}),e._v(" "),t(_.a,{attrs:{rules:e.emailRules,label:"Email",required:""},model:{value:e.form.email,callback:function(t){e.$set(e.form,"email",t)},expression:"form.email"}}),e._v(" "),t(_.a,{attrs:{rules:e.contactNoRules,label:"Contact Number",required:""},model:{value:e.form.contactNo,callback:function(t){e.$set(e.form,"contactNo",t)},expression:"form.contactNo"}}),e._v(" "),t(_.a,{attrs:{label:"Description",required:""},model:{value:e.form.description,callback:function(t){e.$set(e.form,"description",t)},expression:"form.description"}})],1)],1),e._v(" "),t(l.a,[t(x.a),e._v(" "),t(n.a,{attrs:{disabled:!e.valid,color:"blue darken-1"},on:{click:e.saveHelpRequest}},[e._v(e._s(e.isEditing?"Save":"Create"))]),e._v(" "),t(n.a,{attrs:{color:"blue darken-1",text:""},on:{click:e.resetForm}},[e._v("Cancel")])],1)],1)],1),e._v(" "),t(m.a,{attrs:{"max-width":"600px"},model:{value:e.isResolutionDialogVisible,callback:function(t){e.isResolutionDialogVisible=t},expression:"isResolutionDialogVisible"}},[t(o.a,[t(l.d,{staticClass:"headline"},[e._v("Update Resolution")]),e._v(" "),t(l.b,[t("p",[e._v("Provide details on how you resolved the issue.")])]),e._v(" "),t(l.c,[t(f.a,{ref:"resolutionForm",model:{value:e.validResolution,callback:function(t){e.validResolution=t},expression:"validResolution"}},[t(w.a,{attrs:{label:"Resolution Details",rules:e.resolutionRules,rows:"5",outlined:"",required:"",disabled:e.isResolved},model:{value:e.resolutionDetails,callback:function(t){e.resolutionDetails=t},expression:"resolutionDetails"}})],1)],1),e._v(" "),t(l.a,[t(x.a),e._v(" "),t(n.a,{attrs:{disabled:!e.validResolution||e.isResolved,color:"green darken-1"},on:{click:e.saveResolution}},[e._v("Save")]),e._v(" "),t(n.a,{attrs:{color:"red darken-1",text:""},on:{click:e.closeResolutionDialog}},[e._v("Cancel")])],1)],1)],1),e._v(" "),t(k.a,{attrs:{timeout:3e3,top:"",right:""},model:{value:e.snackbar,callback:function(t){e.snackbar=t},expression:"snackbar"}},[e._v("\n\t\t"+e._s(e.snackbarMessage)+"\n\t\t"),t(n.a,{attrs:{color:"red",text:""},on:{click:function(t){e.snackbar=!1}}},[e._v("Close")])],1)],1)}),[],!1,null,"67b19ae9",null);t.default=component.exports}}]);